<svg viewBox="0 0 1200 900" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="1200" height="900" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="600" y="40" font-size="28" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    AI-Driven IoT Smart Agriculture System Architecture
  </text>
  
  <!-- Field Layer -->
  <rect x="50" y="80" width="1100" height="220" fill="#e8f5e9" stroke="#4caf50" stroke-width="3" rx="10"/>
  <text x="600" y="110" font-size="20" font-weight="bold" text-anchor="middle" fill="#2e7d32">
    FIELD LAYER (Sensor Network)
  </text>
  
  <!-- Sensor Group 1: Soil Sensors -->
  <g id="soil-sensors">
    <rect x="80" y="130" width="200" height="140" fill="#fff" stroke="#4caf50" stroke-width="2" rx="8"/>
    <circle cx="180" cy="160" r="25" fill="#8bc34a"/>
    <text x="180" y="168" font-size="28" text-anchor="middle" fill="#fff">ğŸŒ±</text>
    <text x="180" y="205" font-size="14" font-weight="bold" text-anchor="middle">Soil Sensors</text>
    <text x="180" y="225" font-size="11" text-anchor="middle" fill="#666">â€¢ Moisture (3 depths)</text>
    <text x="180" y="240" font-size="11" text-anchor="middle" fill="#666">â€¢ Temperature</text>
    <text x="180" y="255" font-size="11" text-anchor="middle" fill="#666">â€¢ pH, NPK</text>
  </g>
  
  <!-- Sensor Group 2: Weather Station -->
  <g id="weather-sensors">
    <rect x="320" y="130" width="200" height="140" fill="#fff" stroke="#2196f3" stroke-width="2" rx="8"/>
    <circle cx="420" cy="160" r="25" fill="#64b5f6"/>
    <text x="420" y="168" font-size="28" text-anchor="middle" fill="#fff">â›…</text>
    <text x="420" y="205" font-size="14" font-weight="bold" text-anchor="middle">Weather Station</text>
    <text x="420" y="225" font-size="11" text-anchor="middle" fill="#666">â€¢ Temp/Humidity</text>
    <text x="420" y="240" font-size="11" text-anchor="middle" fill="#666">â€¢ Rain, Wind</text>
    <text x="420" y="255" font-size="11" text-anchor="middle" fill="#666">â€¢ Pressure, Light</text>
  </g>
  
  <!-- Sensor Group 3: Camera/Drone -->
  <g id="camera-sensors">
    <rect x="560" y="130" width="200" height="140" fill="#fff" stroke="#ff9800" stroke-width="2" rx="8"/>
    <circle cx="660" cy="160" r="25" fill="#ffb74d"/>
    <text x="660" y="168" font-size="28" text-anchor="middle" fill="#fff">ğŸ“·</text>
    <text x="660" y="205" font-size="14" font-weight="bold" text-anchor="middle">Multispectral Camera</text>
    <text x="660" y="225" font-size="11" text-anchor="middle" fill="#666">â€¢ RGB + NIR</text>
    <text x="660" y="240" font-size="11" text-anchor="middle" fill="#666">â€¢ NDVI calculation</text>
    <text x="660" y="255" font-size="11" text-anchor="middle" fill="#666">â€¢ Stress detection</text>
  </g>
  
  <!-- LoRaWAN indicator -->
  <g id="lorawan">
    <rect x="820" y="150" width="140" height="90" fill="#fff" stroke="#9c27b0" stroke-width="2" rx="8" stroke-dasharray="5,5"/>
    <text x="890" y="180" font-size="16" font-weight="bold" text-anchor="middle" fill="#9c27b0">LoRaWAN</text>
    <text x="890" y="200" font-size="11" text-anchor="middle" fill="#666">868 MHz</text>
    <text x="890" y="215" font-size="11" text-anchor="middle" fill="#666">Range: 5 km</text>
    <text x="890" y="230" font-size="11" text-anchor="middle" fill="#666">Low Power</text>
  </g>
  
  <!-- Arrows from sensors to LoRaWAN -->
  <path d="M 280 200 L 820 200" stroke="#9c27b0" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 520 200 L 820 200" stroke="#9c27b0" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 760 200 L 820 200" stroke="#9c27b0" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Arrow from LoRaWAN to Edge Layer -->
  <path d="M 890 240 L 890 340" stroke="#333" stroke-width="3" fill="none" marker-end="url(#arrowhead-large)"/>
  
  <!-- Edge Layer -->
  <rect x="50" y="340" width="1100" height="280" fill="#e3f2fd" stroke="#2196f3" stroke-width="3" rx="10"/>
  <text x="600" y="370" font-size="20" font-weight="bold" text-anchor="middle" fill="#1565c0">
    EDGE LAYER (Raspberry Pi Gateway)
  </text>
  
  <!-- Data Processing Pipeline -->
  <g id="processing">
    <rect x="100" y="390" width="180" height="100" fill="#fff" stroke="#2196f3" stroke-width="2" rx="8"/>
    <text x="190" y="415" font-size="14" font-weight="bold" text-anchor="middle">Data Aggregation</text>
    <text x="190" y="435" font-size="11" text-anchor="middle" fill="#666">â€¢ Collect readings</text>
    <text x="190" y="450" font-size="11" text-anchor="middle" fill="#666">â€¢ Buffer locally</text>
    <text x="190" y="465" font-size="11" text-anchor="middle" fill="#666">â€¢ Time-series DB</text>
    <text x="190" y="480" font-size="11" text-anchor="middle" fill="#666">Every 15 min</text>
  </g>
  
  <g id="preprocessing">
    <rect x="320" y="390" width="180" height="100" fill="#fff" stroke="#2196f3" stroke-width="2" rx="8"/>
    <text x="410" y="415" font-size="14" font-weight="bold" text-anchor="middle">Preprocessing</text>
    <text x="410" y="435" font-size="11" text-anchor="middle" fill="#666">â€¢ Validation</text>
    <text x="410" y="450" font-size="11" text-anchor="middle" fill="#666">â€¢ Cleaning</text>
    <text x="410" y="465" font-size="11" text-anchor="middle" fill="#666">â€¢ Feature engineering</text>
    <text x="410" y="480" font-size="11" text-anchor="middle" fill="#666">â€¢ Normalization</text>
  </g>
  
  <g id="ai-inference">
    <rect x="540" y="390" width="200" height="100" fill="#fff3e0" stroke="#ff9800" stroke-width="3" rx="8"/>
    <text x="640" y="415" font-size="14" font-weight="bold" text-anchor="middle" fill="#e65100">AI Inference Engine</text>
    <text x="640" y="435" font-size="11" text-anchor="middle" fill="#666">â€¢ XGBoost Predictor</text>
    <text x="640" y="450" font-size="11" text-anchor="middle" fill="#666">â€¢ CNN Analyzer</text>
    <text x="640" y="465" font-size="11" text-anchor="middle" fill="#666">â€¢ LSTM Forecaster</text>
    <text x="640" y="480" font-size="10" font-style="italic" text-anchor="middle" fill="#ff6f00">Latency: &lt;500ms</text>
  </g>
  
  <g id="decision">
    <rect x="780" y="390" width="180" height="100" fill="#fff" stroke="#4caf50" stroke-width="2" rx="8"/>
    <text x="870" y="415" font-size="14" font-weight="bold" text-anchor="middle">Decision Engine</text>
    <text x="870" y="435" font-size="11" text-anchor="middle" fill="#666">â€¢ Alert triggers</text>
    <text x="870" y="450" font-size="11" text-anchor="middle" fill="#666">â€¢ Recommendations</text>
    <text x="870" y="465" font-size="11" text-anchor="middle" fill="#666">â€¢ Action planning</text>
    <text x="870" y="480" font-size="11" text-anchor="middle" fill="#666">â€¢ Irrigation control</text>
  </g>
  
  <!-- Arrows in processing pipeline -->
  <path d="M 280 440 L 310 440" stroke="#2196f3" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 500 440 L 530 440" stroke="#2196f3" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <path d="M 740 440 L 770 440" stroke="#2196f3" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Model Output Box -->
  <g id="output">
    <rect x="250" y="520" width="700" height="80" fill="#fff8e1" stroke="#ffa726" stroke-width="2" rx="8"/>
    <text x="600" y="545" font-size="16" font-weight="bold" text-anchor="middle" fill="#e65100">AI Model Output</text>
    <text x="280" y="570" font-size="12" text-anchor="start" fill="#666">ğŸ“Š Predicted Yield: 8.5 tons/hectare (Â±0.8)</text>
    <text x="280" y="588" font-size="12" text-anchor="start" fill="#666">ğŸ’§ Irrigation Needed: 12mm in 24 hours | ğŸŒ¾ NDVI: 0.72 (healthy) | âš ï¸ Alert: Low N detected</text>
  </g>
  
  <!-- Cloud Layer -->
  <rect x="50" y="660" width="550" height="180" fill="#f3e5f5" stroke="#9c27b0" stroke-width="3" rx="10"/>
  <text x="325" y="690" font-size="18" font-weight="bold" text-anchor="middle" fill="#6a1b9a">
    CLOUD LAYER (Optional Sync)
  </text>
  
  <g id="cloud-db">
    <rect x="80" y="710" width="220" height="100" fill="#fff" stroke="#9c27b0" stroke-width="2" rx="8"/>
    <text x="190" y="735" font-size="13" font-weight="bold" text-anchor="middle">Historical Database</text>
    <text x="190" y="755" font-size="11" text-anchor="middle" fill="#666">â€¢ PostgreSQL + TimescaleDB</text>
    <text x="190" y="770" font-size="11" text-anchor="middle" fill="#666">â€¢ Multi-year data</text>
    <text x="190" y="785" font-size="11" text-anchor="middle" fill="#666">â€¢ Regional aggregation</text>
    <text x="190" y="800" font-size="10" text-anchor="middle" fill="#9c27b0">Sync: Daily</text>
  </g>
  
  <g id="cloud-training">
    <rect x="340" y="710" width="220" height="100" fill="#fff" stroke="#9c27b0" stroke-width="2" rx="8"/>
    <text x="450" y="735" font-size="13" font-weight="bold" text-anchor="middle">Model Training</text>
    <text x="450" y="755" font-size="11" text-anchor="middle" fill="#666">â€¢ Weekly retraining</text>
    <text x="450" y="770" font-size="11" text-anchor="middle" fill="#666">â€¢ Hyperparameter tuning</text>
    <text x="450" y="785" font-size="11" text-anchor="middle" fill="#666">â€¢ A/B testing</text>
    <text x="450" y="800" font-size="10" text-anchor="middle" fill="#9c27b0">Push updates to edge</text>
  </g>
  
  <!-- Application Layer -->
  <rect x="650" y="660" width="500" height="180" fill="#fff3e0" stroke="#ff6f00" stroke-width="3" rx="10"/>
  <text x="900" y="690" font-size="18" font-weight="bold" text-anchor="middle" fill="#e65100">
    APPLICATION LAYER
  </text>
  
  <g id="dashboard">
    <rect x="680" y="710" width="200" height="100" fill="#fff" stroke="#ff9800" stroke-width="2" rx="8"/>
    <text x="780" y="735" font-size="13" font-weight="bold" text-anchor="middle">Farmer Dashboard</text>
    <text x="780" y="755" font-size="11" text-anchor="middle" fill="#666">ğŸ“± Real-time monitoring</text>
    <text x="780" y="770" font-size="11" text-anchor="middle" fill="#666">ğŸ“ˆ Yield predictions</text>
    <text x="780" y="785" font-size="11" text-anchor="middle" fill="#666">ğŸ’¡ Recommendations</text>
    <text x="780" y="800" font-size="11" text-anchor="middle" fill="#666">ğŸ“Š Analytics</text>
  </g>
  
  <g id="automation">
    <rect x="910" y="710" width="200" height="100" fill="#fff" stroke="#4caf50" stroke-width="2" rx="8"/>
    <text x="1010" y="735" font-size="13" font-weight="bold" text-anchor="middle">Automated Systems</text>
    <text x="1010" y="755" font-size="11" text-anchor="middle" fill="#666">ğŸ’§ Irrigation controller</text>
    <text x="1010" y="770" font-size="11" text-anchor="middle" fill="#666">ğŸŒ¾ Fertilizer dispenser</text>
    <text x="1010" y="785" font-size="11" text-anchor="middle" fill="#666">ğŸš Drone missions</text>
    <text x="1010" y="800" font-size="11" text-anchor="middle" fill="#666">ğŸ”” Alert notifications</text>
  </g>
  
  <!-- Arrows connecting layers -->
  <path d="M 325 600 L 325 650" stroke="#9c27b0" stroke-width="2" fill="none" marker-end="url(#arrowhead)" stroke-dasharray="5,5"/>
  <path d="M 870 600 L 870 650" stroke="#ff9800" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Arrow markers -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333"/>
    </marker>
    <marker id="arrowhead-large" markerWidth="12" markerHeight="12" refX="10" refY="4" orient="auto">
      <polygon points="0 0, 12 4, 0 8" fill="#333"/>
    </marker>
  </defs>
  
  <!-- Legend -->
  <g id="legend">
    <rect x="50" y="860" width="680" height="30" fill="#fff" stroke="#666" stroke-width="1" rx="5"/>
    <text x="60" y="880" font-size="11" font-weight="bold" fill="#333">Key Benefits:</text>
    <text x="140" y="880" font-size="10" fill="#4caf50">15-25% Yield â†‘</text>
    <text x="250" y="880" font-size="10" fill="#2196f3">30% Water Savings</text>
    <text x="380" y="880" font-size="10" fill="#ff9800">Real-time Decisions (&lt;1s)</text>
    <text x="540" y="880" font-size="10" fill="#9c27b0">14-21 Day Early Warning</text>
  </g>
